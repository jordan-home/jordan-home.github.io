---
title: 代码整洁之道:小抄
date: 2021-04-10
sidebar: auto
categories:
  - IT
tags:
  - 代码规范
  - 读书笔记
---
<clock />

::: tip 书籍简介
书名：代码整洁之道 
作者：John Schember 
分类：IT
:::
<!-- more -->

## Chapter1 整洁代码

1. 勒布朗（LeBlanc）法则：稍后等于永不（Later equals never）
2. 混乱的代价：对代码的每次修改都影响到其他两三处代码。修改无小事。每次添加或修改代码，都得对那堆扭纹柴了然于心，这样才能往上扔更多的扭纹柴。这团乱麻越来越大，再也无法理清，最后束手无策。
3. 医生如果按病人说的办，就是一种不专业的态度（更别说是犯罪了）。
同理，程序员遵从不了解混乱风险的经理的意愿，也是不专业的做法。
4. 不读周边代码的话就没法写代码。编写代码的难度，取决于读周边代码的难度。
5. 光把代码写好可不够。必须时时*保持代码整洁* 。我们都见过代码随时间流逝而腐坏。我们应当更积极地阻止腐坏的发生。

## Chapter2 有意义的命名

取好名字的几个规则：
* 名副其实：一旦发现有更好的名称，就换掉旧的；如果需要注释补充就不够名副其实，结合上下文
* 避免误导
* 做有意义的区分，而非只是为了满足编辑器和解释器的需要，比如a1,a2
* 可读的名称
* 使用可搜索的名称
* 避免使用编码，增加了解码的负担，如 匈牙利语标记法 和 成员前缀_dd
* 避免思维映射
* 类名、对象名要求名词或名词短语；方法名要求动词或动词短语；属性相关应该加上get,set或is前缀。
* 名字必须明确，易懂
* 给每个抽象概念选一个词，并且一以贯之，如getXXX,fetchYYY,等。
* 技术性的名称有时候更好，因为写代码看代码的都是技术人
* 或者根据业务、问题、语境来命名

## Chapter3 函数

1. 要短小，每个函数都只说一件事，每个函数都依序带到下一个函数，函数的缩进层级不该多于一层或两层
2. 只做一件事情的函数很难再合理的切分
3. 每个函数一个抽象层。自顶向下读代码
4. 注意switch语句，天生做好几件事，最好放到底层，其他部分不容易看到
5. 使用描述性名称。别害怕名字长，别害怕花时间。命名要一脉相承，符合统一的规则
6. 函数参数。参数越少越好。
7. 标识参数很丑，不要传布尔值，否则意味着函数一定做了几件事
8. 如果函数必须要多个参数，可以考虑封装成对象、类了
9. 一元函数：函数名（动词或动词短语）+ 参数（名词）
10. 抽离try…catch,把代码块主体抽离出来，另外一个函数。错误处理本身就是一件事了
11. 别重复代码
12. 好的函数写法是改出来的

## Chapter4 注释

1. 注释是在无法清晰表达时的一种补救措施。注释存在时间越久，就越不可靠。因为代码会随着时间变动，而注释没有及时更新
2. 清晰的代码比注释更重要
3. 注释：阐释返回值和参数的意义，表达意图，警示，TODO等

## Chapter5 格式

1. 好的代码格式有利于阅读和修改
2. 单个文件代码行数应该少
3. 从上到下的结构秩序
4. 每一个块间有空行隔开
5. 相关的代码块应该彼此相近
6. 一行代码长度应该短
7. 适当的缩进

## Chapter6 如何学习、使用第三方代码/库？

学习性测试：编写测试用例来熟悉理解第三方代码

## Chapter7 可能的坏味道

1. 注释
* 不恰当的信息
* 废弃的注释
* 冗余的注释
* 糟糕的注释
* 注释掉的代码
2. 环境
* 构建代码的命令应该尽可能少短
* 进行测试的指令也应该少
3. 函数
* 参数太多
* 标志参数
* 死函数（不被调用的函数）
4. 一般性问题
* 忽视安全
* 重复
* 死代码（不执行的代码）
* 用常量代替魔术数
5. 名称
6. 测试
7. etc